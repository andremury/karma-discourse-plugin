{{#if siteSettings.Show_vote_reason_form}}
  {{#unless hasSetReason}}
    <button
      type="button"
      class="__karma-send-reason-btn k-btn btn-link"
      onClick={{toggleModal}}
    >
      Submit vote reason {{threadId}}
    </button>
  {{/unless}}

  <div
    id={{modalId}}
    class="__karma-vote-form-modal"
    style="display:none;opacity:0;transform:translateY(20px)"
  >
    <div class="backdrop" onClick={{toggleModal}}>
    </div>
    {{#if loading}}
      {{karma-loading message="Submitting data, please wait."}}
    {{else}}
      {{#unless message.length}}
        <form onSubmit={{submit}}>
          <div class="modal-content">
            <div class="form-reason">
              <label for="thread-id">
                Reason thread
              </label>
              <select
                name="thread-id"
                value={{threadId}}
                onchange={{setThreadId}}
                required
              >
                <option value="null" disabled selected>
                  Select an option
                </option>
                {{#each threads as |thread index|}}
                  <option value={{index}}>
                    {{thread.name}}
                  </option>
                {{/each}}
              </select>

              <label for="reason">
                Proposal
              </label>
              <select
                name="reason"
                placeholder="I voted FOR, because I believe this is a good proposal."
                value={{form.proposalId}}
                onchange={{setProposal}}
                required
              >
                <option value="null" disabled selected>
                  Select an option
                </option>
                {{#each proposals as |proposal index|}}
                  <option value={{index}}>
                    {{proposal.title}}
                  </option>
                {{/each}}
              </select>
              <br />
              <label for="reason">
                Summary
              </label>
              {{d-editor value=form.summary}}
              <br />
              <label for="reason">
                Recommendation
              </label>
              {{d-editor value=form.reason}}
              <br />
            </div>
            {{#if errors.length}}
              {{#each errors as |error|}}
                <span class="error" style="color:var(--danger)">
                  {{error}}
                </span>
                <br />
              {{/each}}
            {{/if}}
            <div class="footer">
              <button
                type="button"
                class="k-btn btn-danger"
                onClick={{toggleModal}}
              >
                Cancel
              </button>
              <button type="submit" class="k-btn btn-success">
                Send
              </button>
            </div>
          </div>
        </form>
      {{else}}
        <div class="karma-form-submitted-message">
          <p>
            {{message}}
          </p>
        </div>
      {{/unless}}
    {{/if}}
  </div>
{{/if}}
